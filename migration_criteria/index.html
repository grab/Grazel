


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Gradle plugin to automate Bazel migration for Android projects">
      
      
        <link rel="canonical" href="https://github.com/grab/Grazel/migration_criteria/">
      
      
        <meta name="author" content="Grab, Inc">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.3.2">
    
    
      
        <title>Migration Criteria and Workflow - Grazel</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/site.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="cyan" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#migration-criteria" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://github.com/grab/Grazel" title="Grazel" class="md-header-nav__button md-logo" aria-label="Grazel">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Grazel
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Migration Criteria and Workflow
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/grab/Grazel/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    grab/Grazel
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://github.com/grab/Grazel" title="Grazel" class="md-nav__button md-logo" aria-label="Grazel">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Grazel
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/grab/Grazel/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    grab/Grazel
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Configuration
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Configuration" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../grazel_extension/" title="Grazel Extension" class="md-nav__link">
      Grazel Extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gradle_tasks/" title="Gradle Tasks" class="md-nav__link">
      Gradle Tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bazel_configuration/" title="Bazel" class="md-nav__link">
      Bazel
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Migration
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Migration" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Migration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../migration_capabilities/" title="Migration Capabilities" class="md-nav__link">
      Migration Capabilities
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Migration Criteria and Workflow
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Migration Criteria and Workflow" class="md-nav__link md-nav__link--active">
      Migration Criteria and Workflow
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#criteria" class="md-nav__link">
    Criteria
  </a>
  
    <nav class="md-nav" aria-label="Criteria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-criteria" class="md-nav__link">
    Sample Criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predefined-criteria" class="md-nav__link">
    Predefined criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-defined-criteria" class="md-nav__link">
    User defined criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contribute-custom-criteria" class="md-nav__link">
    Contribute custom criteria
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incremental-migration" class="md-nav__link">
    Incremental Migration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forward-compatible" class="md-nav__link">
    Forward Compatible
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-workflow" class="md-nav__link">
    Migration Workflow
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hybrid_builds/" title="Hybrid Builds" class="md-nav__link">
      Hybrid Builds
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Misc
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Misc" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Misc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../databinding/" title="Databinding" class="md-nav__link">
      Databinding
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#criteria" class="md-nav__link">
    Criteria
  </a>
  
    <nav class="md-nav" aria-label="Criteria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-criteria" class="md-nav__link">
    Sample Criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predefined-criteria" class="md-nav__link">
    Predefined criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-defined-criteria" class="md-nav__link">
    User defined criteria
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contribute-custom-criteria" class="md-nav__link">
    Contribute custom criteria
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incremental-migration" class="md-nav__link">
    Incremental Migration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forward-compatible" class="md-nav__link">
    Forward Compatible
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-workflow" class="md-nav__link">
    Migration Workflow
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/grab/Grazel/edit/master/docs/migration_criteria.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="migration-criteria">Migration Criteria<a class="headerlink" href="#migration-criteria" title="Permanent link">&para;</a></h1>
<p>Grazel was designed acknowledging the fact that migrating all possible combinations of Gradle project might be a difficult problem to solve. Instead it operates by knowing its own limitations on what can and cannot be migrated to Bazel. It does this by establishing various <code>MigrationCriteria</code>. </p>
<p>Every module is run through set of predefined <code>MigrationCriteria</code> and is checked for compatibility. Only modules that pass the criteria are selected for migration, and then induced subgraphs of those modules are migrated to bazel i.e generate bazel scripts.</p>
<h2 id="criteria">Criteria<a class="headerlink" href="#criteria" title="Permanent link">&para;</a></h2>
<h3 id="sample-criteria">Sample Criteria<a class="headerlink" href="#sample-criteria" title="Permanent link">&para;</a></h3>
<p>Let's consider a sample crtierion that a module should be Android, Kotlin or Java project to be eligible for migration.</p>
<div class="highlight"><pre><span></span><code><span class="n">@Singleton</span>
<span class="k">internal</span> <span class="k">class</span> <span class="nc">PluginsMigrationCriteria</span> 
<span class="n">@Inject</span> 
<span class="k">constructor</span><span class="p">()</span> <span class="p">:</span> <span class="n">MigrationCriteria</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">canMigrate</span><span class="p">(</span><span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">):</span> <span class="n">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">project</span><span class="p">.</span><span class="n">isAndroid</span> <span class="p">||</span> <span class="n">project</span><span class="p">.</span><span class="n">isJava</span> <span class="p">||</span> <span class="n">project</span><span class="p">.</span><span class="n">isKotlin</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>This criteria is evaluated together with other criteria and then final graph for migration is calculated. This approach enables Grazel to do <a href="#incremental-migration">incremental migrations</a>.</p>
<h3 id="predefined-criteria">Predefined criteria<a class="headerlink" href="#predefined-criteria" title="Permanent link">&para;</a></h3>
<ul>
<li>Android, Java or Kotlin plugin is applied to the module</li>
<li>A module's dependencies are all resolved from supported Maven repositories. <a href="../migration_capabilities/#maven-artifact-repositories">Details</a>.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pre-existing criteria were designed keeping Grab's app in mind. It might need to be expanded depending on project configuration. If you encounter such issues, please let us know.</p>
</div>
<h3 id="user-defined-criteria">User defined criteria<a class="headerlink" href="#user-defined-criteria" title="Permanent link">&para;</a></h3>
<p>Few migration critera are configurable via Grazel extensions.</p>
<ul>
<li>Databinding - Android project using databinding/viewbinding are not migrated by default. The <a href="../grazel_extension/#databinding">android extension</a> can be used to change that.</li>
<li>Ignored artifacts - A module that uses any of the artifacts that ignored in dependencies extension are not migrated. </li>
</ul>
<h3 id="contribute-custom-criteria">Contribute custom criteria<a class="headerlink" href="#contribute-custom-criteria" title="Permanent link">&para;</a></h3>
<p>A module passing migration criterria means that it can be safely built with Bazel. Due to missing checks it is possible a module was migrated but build fails. In that case the migration criteria needs to be updated or a new check needs to be added to prevent build failures. To do that, start by implementing <code>MigrationCriteria</code> interface.</p>
<div class="highlight"><pre><span></span><code><span class="n">@Singleton</span>
<span class="k">internal</span> <span class="k">class</span> <span class="nc">CustomMigrationCriteria</span> 
<span class="n">@Inject</span> 
<span class="k">constructor</span><span class="p">()</span> <span class="p">:</span> <span class="n">MigrationCriteria</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">canMigrate</span><span class="p">(</span><span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">):</span> <span class="n">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="c1">// Custom checks</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Add the criteria to <a href="https://github.com/grab/Grazel/blob/2394bb8269f7c49ec05fa7bd12b8b9a10585aadb/grazel-gradle-plugin/src/main/kotlin/com/grab/grazel/gradle/MigrationCriteria.kt#L37">set</a> to let Grazel pick up the condition.</p>
<div class="highlight"><pre><span></span><code><span class="n">@ElementsIntoSet</span>
<span class="n">@Provides</span>
<span class="k">fun</span> <span class="nf">migrationCriteria</span><span class="p">(</span>
    <span class="c1">//...</span>
    <span class="n">customMigrationCriteria</span><span class="p">:</span> <span class="n">CustomMigrationCriteria</span>
<span class="p">):</span> <span class="n">Set</span><span class="p">&lt;</span><span class="n">MigrationCriteria</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">setOf</span><span class="p">(</span>
    <span class="c1">//...</span>
    <span class="n">customMigrationCriteria</span>
<span class="p">)</span>
</code></pre></div>

<h2 id="incremental-migration">Incremental Migration<a class="headerlink" href="#incremental-migration" title="Permanent link">&para;</a></h2>
<p>Through use of migration criteria, Grazel can do incremental migrations where initially supported modules can be migrated. Then by increasing Grazel's feature set or by custom rules, the migration criteria can be widened to cover more modules.</p>
<p>For validations on these partial migrations, Grazel can also setup <a href="../hybrid_builds/">hybrid builds</a> to assert these changes.</p>
<h2 id="forward-compatible">Forward Compatible<a class="headerlink" href="#forward-compatible" title="Permanent link">&para;</a></h2>
<p>Validating against migration crtieria helps in letting changes generated by Grazel to be forward compatible. This means since Gradle is always source of truth for the duration of migration, any feature changes changes in Gradle can be synced with Bazel simply by running <code>migrateToBazel</code>. This is particularly helpful in earlier stages of migration where not a lot of modules could be migrated and feature development was causing lot of graph changes.</p>
<h2 id="migration-workflow">Migration Workflow<a class="headerlink" href="#migration-workflow" title="Permanent link">&para;</a></h2>
<p>Migration workflow with Grazel could look like below.</p>
<p><img src="../images/migration_workflow.png" width="100%"></p>
<p>This way 100% compatible build can be acheived while having defined results along the way.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../migration_capabilities/" title="Migration Capabilities" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Migration Capabilities
              </div>
            </div>
          </a>
        
        
          <a href="../hybrid_builds/" title="Hybrid Builds" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Hybrid Builds
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright 2021 Grabtaxi Holdings PTE LTE (GRAB)
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.7f4f3c92.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["navigation.indexes"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>